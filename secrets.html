<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unlock Access</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 600px; 
            margin: 50px auto; 
            padding: 20px; 
            background: #111; 
            color: #fff; 
        }
        input { 
            width: 100%; 
            padding: 10px; 
            margin: 10px 0; 
            background: #222; 
            border: 1px solid #444; 
            color: #fff; 
        }
        button { 
            padding: 10px 20px; 
            background: #333; 
            color: #fff; 
            border: none; 
            cursor: pointer; 
            margin-top: 10px;
        }
        button:hover { background: #555; }
        #gate1, #gate2, #gate3, #final, #countdown { display: none; }
        #start { display: block; }
        .error { color: #f00; margin-top: 10px; }
        a { color: #0af; text-decoration: underline; }
        #countdown { color: #f00; font-weight: bold; }
    </style>
</head>
<body>

    <!-- START -->
    <div id="start">
        <h1>Follow the breadcrumbs.</h1>
        <p>If you're here, you know why. Enter the first key to proceed.</p>
        <input type="password" id="input1" placeholder="Our first cat's name?">
        <button onclick="checkGate1()">Submit</button>
        <div id="error1" class="error"></div>
    </div>

    <!-- GATE 2 -->
    <div id="gate2">
        <h2>Gate 2 Unlocked</h2>
        <p>What piece of furniture did we haul with the U-Haul?</p>
        <input type="text" id="input2" placeholder="Answer here">
        <button onclick="checkGate2()">Submit</button>
        <div id="error2" class="error"></div>
    </div>

    <!-- GATE 3 -->
    <div id="gate3">
        <h2>Gate 3 Unlocked</h2>
        <p>Steve was the creepy guy we talked to about picking up a...?</p>
        <input type="text" id="input3" placeholder="Answer here">
        <button onclick="checkGate3()">Submit</button>
        <div id="error3" class="error"></div>
    </div>

    <!-- FINAL -->
    <div id="final">
        <h1>Access Granted</h1>
        <p>Download this application if you want to communicate with me.</p>
        <p>Screenshots are not allowed.<br>Messages disappear.<br>Screen recording does not work.</p>
        <p>Itâ€™s the only way to communicate in any shape or form.<br>Make an account, turn on max privacy settings only then reach out, if you reach out I will respond here</p>
        <p><a href="https://getconfide.com/add/842ybtcb" target="_blank">https://getconfide.com/add/842ybtcb</a></p>
        <p>Once inside, search for Iam Nobody.</p>
        <div id="countdown"></div>
        <button onclick="localStorage.removeItem('puzzleProgress'); localStorage.removeItem('attempts'); location.reload();">Erase Trail</button>
    </div>

    <script>
        // Initialize
        function init() {
            let attempts = parseInt(localStorage.getItem('attempts') || '0');
            if (attempts >= 3) {
                wipeAll();
                return;
            }

            const progress = JSON.parse(localStorage.getItem('puzzleProgress') || '{"gate1":false,"gate2":false,"gate3":false}');
            if (progress.gate1 && !progress.gate2) showGate('gate2');
            else if (progress.gate1 && progress.gate2 && !progress.gate3) showGate('gate3');
            else if (progress.gate1 && progress.gate2 && progress.gate3) {
                showFinal();
                startCountdown();
            }
        }

        function showGate(gate) {
            document.querySelectorAll('div[id^="gate"], #start, #final, #countdown').forEach(el => el.style.display = 'none');
            document.getElementById(gate).style.display = 'block';
        }

        function showFinal() {
            document.querySelectorAll('div[id^="gate"], #start').forEach(el => el.style.display = 'none');
            document.getElementById('final').style.display = 'block';
            document.getElementById('countdown').style.display = 'block';
        }

        function startCountdown() {
            let timeLeft = 10;
            const countdownEl = document.getElementById('countdown');
            countdownEl.textContent = `Puzzle restarts in ${timeLeft} seconds. Click the link or redo the puzzle.`;

            const timer = setInterval(() => {
                timeLeft--;
                countdownEl.textContent = `Puzzle restarts in ${timeLeft} seconds. Click the link or redo the puzzle.`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    incrementAttempts();
                }
            }, 1000);
        }

        function incrementAttempts() {
            let attempts = parseInt(localStorage.getItem('attempts') || '0') + 1;
            localStorage.setItem('attempts', attempts);
            if (attempts >= 3) {
                wipeAll();
            } else {
                wipeProgress();
            }
        }

        function wipeProgress() {
            localStorage.removeItem('puzzleProgress');
            location.reload();
        }

        function wipeAll() {
            localStorage.removeItem('puzzleProgress');
            localStorage.removeItem('attempts');
            document.body.innerHTML = '<h1 style="text-align:center;color:#f00;">Access Denied. Puzzle destroyed.</h1>';
        }

        // Gate 1: "pickle"
        function checkGate1() {
            const input = document.getElementById('input1').value.trim().toLowerCase();
            const error = document.getElementById('error1');
            if (input === 'pickle') {
                localStorage.setItem('puzzleProgress', JSON.stringify({gate1:true,gate2:false,gate3:false}));
                showGate('gate2');
            } else {
                error.textContent = 'Wrong key. Try again.';
            }
        }

        // Gate 2: "couch"
        function checkGate2() {
            const input = document.getElementById('input2').value.trim().toLowerCase();
            const error = document.getElementById('error2');
            if (input === 'couch') {
                const progress = JSON.parse(localStorage.getItem('puzzleProgress'));
                progress.gate2 = true;
                localStorage.setItem('puzzleProgress', JSON.stringify(progress));
                showGate('gate3');
            } else {
                error.textContent = 'Nope. Think back.';
            }
        }

        // Gate 3: contains "piano"
        function checkGate3() {
            const input = document.getElementById('input3').value.trim().toLowerCase();
            const error = document.getElementById('error3');
            if (input.includes('piano')) {
                const progress = JSON.parse(localStorage.getItem('puzzleProgress'));
                progress.gate3 = true;
                localStorage.setItem('puzzleProgress', JSON.stringify(progress));
                showFinal();
                startCountdown();
            } else {
                error.textContent = 'Creepier than you remember? Dig deeper.';
            }
        }

        init();
    </script>

</body>
</html>
